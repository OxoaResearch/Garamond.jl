<!doctype html>
<html>
<head>
    <title>0x0Î± Research search</title>
    <style>
	form {
		width:500px;
		margin:50px auto;
	}
	.search {
		padding:8px 25px;
		background:rgba(100, 100, 100, 0.2);
		border:1px solid #000000;
	}
	.button {
		position:relative;
		padding:8px 15px;
		left:8px;
		border:1px solid #000000;
		background-color:#a0cfff;
		color:#000000;
	}
	.button:hover  {
		background-color:#fafafa;
		color:#207cca;
	}
	.sent {
		color: blue;
	}
	.received {
		color: green;
	}
    </style>
</head>
<body>
	<!-- search section -->
	<div id="search_box", style="position:fixed;top:0;height:50px;width:100%;">
		<form>
			<input id="search_box_txt" type="text" class="search" placeholder="Search..." required>
			<input id="search_box_button" type="submit" class="button" value="Search">
		</form>
	</div>
	
	<!-- results section -->
	<div id="search_results">
	</div>

<script type="text/javascript">
   document.addEventListener("DOMContentLoaded", function() {
        var connection = new WebSocket("ws://localhost:9999");
	
	//When receiving socket message
        connection.onmessage = function( query_response ){
            window.lastmessage = query_response;
            $("#search_results").append( $("<p class='received'></p>").html( query_response.data ) );
        }
        
	// Send message function
	function sendMessage( query ){
            connection.send(query);
        }

	// Variables for the search box and button
	var search_box_button = document.getElementById("search_box_button"),
	    serch_box_txt = document.getElementById("search_box_txt")

	// When clicking the button
	search_box_button.onclick = function(){
		//sendMessage(search_box_txt.value);
		document.write(search_box_txt.value);
        	}
	);
	
	// If enter is pressed when in the search box
	search_box_txt.addEventListener("onkeyup", function(e) {
    		if (e.keyCode === 13) {
        		search_box_button.click();
    		}
	});
    });
</script>

</body>

</html>
